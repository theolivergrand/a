
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test Interactive HTML</title>
</head>
<body>

    <div id="interactive-container" style="position: relative; width: 100px; height: 100px; margin: auto; border: 1px solid #ddd; border-radius: 8px; overflow: hidden;">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAIAAAD/gAIDAAAA5UlEQVR4nO3QsQEAIAyAMPX/n+sLZU9mJu7MHHbessOsxqzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKzArMCswKyz9wHP8QPFYyxSDQAAAABJRU5ErkJggg==" 
             style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
             id="ui-image" />
        <div id="overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none;">
    
                <div class="ui-element ui-element-1" 
                     style="position: absolute; 
                            left: 10px; 
                            top: 10px; 
                            width: 40px; 
                            height: 40px; 
                            border: 3px solid #00ff00; 
                            background-color: rgba(0, 255, 0, 0.05);
                            cursor: pointer;
                            pointer-events: auto;
                            border-radius: 4px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: bold;
                            font-size: 16px;
                            color: #00ff00;
                            text-shadow: 1px 1px 2px rgba(0,0,0,0.9);">
                    1
                </div>
                
        </div>
        <div id="tooltip" style="position: absolute; 
                                 background: rgba(0, 0, 0, 0.95); 
                                 color: white; 
                                 padding: 10px 15px; 
                                 border-radius: 8px; 
                                 font-size: 14px; 
                                 max-width: 300px; 
                                 z-index: 1000; 
                                 display: none;
                                 box-shadow: 0 6px 12px rgba(0,0,0,0.4);
                                 pointer-events: none;
                                 border: 1px solid #333;">
        </div>
    </div>
    
    <script>
    // Wait for DOM to be ready
    (function() {
        const elementsData = [{"id": 1, "description": "Test button with 'quotes' and \"double quotes\""}];
        let selectedElementId = null;
        
        function initializeInteractivity() {
            const container = document.getElementById('interactive-container');
            if (!container) {
                setTimeout(initializeInteractivity, 100);
                return;
            }
            
            const tooltip = document.getElementById('tooltip');
            
            // Add event listeners to all elements
            elementsData.forEach(function(elementData) {
                const elements = container.querySelectorAll('.ui-element-' + elementData.id);
                elements.forEach(function(element) {
                    // Hover events
                    element.addEventListener('mouseenter', function(e) {
                        if (tooltip) {
                            tooltip.innerHTML = '<strong>Элемент ' + elementData.id + ':</strong><br>' + elementData.description;
                            tooltip.style.display = 'block';
                            
                            const rect = e.target.getBoundingClientRect();
                            const containerRect = container.getBoundingClientRect();
                            
                            tooltip.style.left = (rect.left - containerRect.left + rect.width + 10) + 'px';
                            tooltip.style.top = (rect.top - containerRect.top) + 'px';
                        }
                        
                        if (elementData.id !== selectedElementId) {
                            e.target.style.backgroundColor = 'rgba(0, 255, 0, 0.15)';
                            e.target.style.borderWidth = '4px';
                            e.target.style.borderColor = '#00ff00';
                            e.target.style.boxShadow = '0 0 10px rgba(0, 255, 0, 0.5)';
                        }
                    });
                    
                    element.addEventListener('mouseleave', function(e) {
                        if (tooltip) {
                            tooltip.style.display = 'none';
                        }
                        
                        if (elementData.id !== selectedElementId) {
                            e.target.style.backgroundColor = 'rgba(0, 255, 0, 0.05)';
                            e.target.style.borderWidth = '3px';
                            e.target.style.borderColor = '#00ff00';
                            e.target.style.boxShadow = 'none';
                        }
                    });
                    
                    // Click event
                    element.addEventListener('click', function(e) {
                        // Clear all selections
                        container.querySelectorAll('.ui-element').forEach(function(el) {
                            el.style.backgroundColor = 'rgba(0, 255, 0, 0.05)';
                            el.style.borderWidth = '3px';
                            el.style.borderColor = '#00ff00';
                            el.style.boxShadow = 'none';
                        });
                        
                        if (selectedElementId === elementData.id) {
                            // Deselect
                            selectedElementId = null;
                        } else {
                            // Select
                            selectedElementId = elementData.id;
                            e.target.style.backgroundColor = 'rgba(255, 0, 0, 0.1)';
                            e.target.style.borderWidth = '4px';
                            e.target.style.borderColor = '#ff0000';
                            e.target.style.boxShadow = '0 0 15px rgba(255, 0, 0, 0.6)';
                        }
                    });
                });
            });
        }
        
        // Start initialization
        initializeInteractivity();
    })();
    </script>
    
</body>
</html>
